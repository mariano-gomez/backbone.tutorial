<html >
<head>
	<title></title>
	<script src="/scripts/jquery_1.10.2.js"></script>
	<script src="/scripts/underscore_1.4.1.js" type="text/javascript"></script>
	<script src="/scripts/backbone_0.9.2.js" type="text/javascript"></script>
</head>
<body>
	<script type="text/javascript">
		/*var Movie = Backbone.Model.extend({		//	Un modelo basico, nada interesante
			defaults: { mpaaRating: "NR" },
			initialize: function() { console.log("Movie Model initialize"); }
		});

		//	IMPORTANTE: Especificar cual es el modelo que va a ser contenido en la coleccion
		var Movies = Backbone.Collection.extend({
			//	This tells the collection that the type of models that will be manage will be “Movie” type.
			model: Movie,	//	No uso una instancia, sino la vble donde declaro la estructura del modelo (Movie, no "movie")
			initialize: function() {
				console.log("");
				console.log("Movie Collection initialize");
				console.log(this);
				console.log(this.length);	//	We can see in the results that when the collection’s initialize method gets called the collection does not include the models that were passed in.
				console.log(this.models);
			}
		});

		var movie1 = new Movie({
			"title": "Bag It",
			"averageUserRating": 4.6,
			"yearReleased": 2010,
			"mpaaRating": "R"
		});

		var movie2 = new Movie({
			"title": "Lost Boy: The Next Chapter",
			"averageUserRating": 4.6,
			"yearReleased": 2009,
			"mpaaRating": "PG-13"
		});

		var movies = new Movies([movie1, movie2]);	//	Paso las peliculas que quiero contener en la coleccion como un array
		console.log("");
		console.log(movies.length);
		console.log(movies.at(1).get("title"));/**/
	</script>
	
	<script type="text/javascript">
		//	The primary purpose of this example is to show how collection events work.
        var Movie = Backbone.Model.extend({});
 
        var Movies = Backbone.Collection.extend({
            model: Movie,
            initialize: function() {
                console.log("Movies initialize");
            }
        });
 
		//	Esta funcion se va a llamar cuando se agregue una pelicula a la coleccion
        var movieAdded = function (model, collection, options) {
            console.log("");
            console.log("movieAdded:" + model.get("title"));
            console.log("Collection Count: " + collection.length);
        };
 
		//	Esta funcion se va a llamar cada vez que una pelicula contenida dentro de la coleccion se modifique
        var movieChange = function (model, changes, c) {
            console.log("");
            console.log("movieChange:" + model.get("title"));
            console.log(changes);
        };
 
        var movie1 = new Movie({
            "title": "Bag It",
            "averageUserRating": 4.6,
            "yearReleased": 2010,
            "mpaaRating": "R"
        });
 
        var movies = new Movies([movie1]);
        movies.on("add", movieAdded);		//	Cuando se AGREGA una peli a la coleccion, se ejecuta la fcion movieAdded()
        movies.on("change", movieChange);	//	Cuando se MODIFICA una peli de la coleccion, se ejecuta la fcion movieChange()
         
        var movie2 = new Movie({
            "title": "Lost Boy: The Next Chapter",
            "averageUserRating": 4.6,
            "yearReleased": 2009,
            "mpaaRating": "PG-13"
        });
        movies.add([movie2]);	//	Agrego una peli a la coleccion, para comprobar el trigger
 
        movie1.set({ title: "The Big Fish", yearReleased: "the big fish"});	//	Edito una peli contenida en la coleccion, para comprobar el trigger
    </script>
</body>
</html>